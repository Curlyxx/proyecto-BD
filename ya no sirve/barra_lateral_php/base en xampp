-- Crear la base de datos si no existe
CREATE DATABASE IF NOT EXISTS chats1;
USE chats1;

-- Tabla para almacenar las conversaciones
CREATE TABLE IF NOT EXISTS conversaciones (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Tabla para almacenar mensajes individuales
CREATE TABLE IF NOT EXISTS mensajes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    conversacion_id INT NOT NULL,
    tipo ENUM('usuario', 'ai') NOT NULL,
    contenido TEXT NOT NULL,
    sentimiento ENUM('POS', 'NEG', 'NEU') NULL,
    fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP,
    ruta_audio VARCHAR(255) NULL,
    FOREIGN KEY (conversacion_id) REFERENCES conversaciones(id) ON DELETE CASCADE
);